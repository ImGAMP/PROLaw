{"remainingRequest":"C:\\Users\\fmoji\\Documents\\Prolaw\\PROLaw\\client\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\fmoji\\Documents\\Prolaw\\PROLaw\\client\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\fmoji\\Documents\\Prolaw\\PROLaw\\client\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\fmoji\\Documents\\Prolaw\\PROLaw\\client\\src\\views\\Forum.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\fmoji\\Documents\\Prolaw\\PROLaw\\client\\src\\views\\Forum.vue","mtime":1628037234353},{"path":"C:\\Users\\fmoji\\Documents\\Prolaw\\PROLaw\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1627159273000},{"path":"C:\\Users\\fmoji\\Documents\\Prolaw\\PROLaw\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":1627159273000},{"path":"C:\\Users\\fmoji\\Documents\\Prolaw\\PROLaw\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1627159273000},{"path":"C:\\Users\\fmoji\\Documents\\Prolaw\\PROLaw\\client\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1627159273000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IEZvcnVtQ29udHJvbGxlciBmcm9tICcuLi9jb250cm9sbGVyL0ZvcnVtQ29udHJvbGxlci5qcyc7CmltcG9ydCBVc2VyQ29udHJvbGxlciBmcm9tICIuLi9jb250cm9sbGVyL1VzZXJDb250cm9sbGVyLmpzIjsKaW1wb3J0IGVtYWlsanMgZnJvbSAnZW1haWxqcy1jb20nOwpleHBvcnQgZGVmYXVsdCB7CiAgZm9yb0NvbnRyb2xsZXI6IG51bGwsCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuZm9yb0NvbnRyb2xsZXIgPSBuZXcgRm9ydW1Db250cm9sbGVyKCk7CiAgICB0aGlzLmdldENhc2UoKTsKICAgIGNvbnNvbGUubG9nKHRoaXMuJHJvb3QuaWQpOwogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHByZWd1bnRhOiAnJywKICAgICAgcnRhczogW3sKICAgICAgICBuYW1lVXNlcjogJycsCiAgICAgICAgZGF0ZUFuczogJycsCiAgICAgICAgZGVzY3JpcEFuczogJycKICAgICAgfV0sCiAgICAgIHJlc3B1ZXN0YTogewogICAgICAgIGlkOiAnJywKICAgICAgICBpZEM6ICcnLAogICAgICAgIGlkVXNlckE6IHRoaXMuJHJvb3QuaWQsCiAgICAgICAgZGVzY3JpcEFuczogJycsCiAgICAgICAgbmFtZVVzZXI6IHRoaXMuJHJvb3QudXNlcgogICAgICB9LAogICAgICBkaXNwbGF5OiBudWxsLAogICAgICBjb3JyZW86ICcnCiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIGlmIChsb2NhbFN0b3JhZ2UucHJlZ3VudGEpIHsKICAgICAgdGhpcy5wcmVndW50YSA9IGxvY2FsU3RvcmFnZS5wcmVndW50YTsKICAgIH0gZWxzZSB7CiAgICAgIGxvY2FsU3RvcmFnZS5wcmVndW50YSA9IHRoaXMuJHJvdXRlLnBhcmFtcy5xdG47IC8vdGhpcy5wcmVndW50YSA9IHRoaXMuJHJvdXRlLnBhcmFtcy5xdG47CiAgICB9CiAgICAvKmlmIChsb2NhbFN0b3JhZ2UucnRhcykgewogICAgICAgIHRoaXMucnRhcyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oInJ0YXMiKSk7CiAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLnJ0YXMpOwogICAgfSBlbHNlIHsKICAgICAgICBsb2NhbFN0b3JhZ2UucnRhcyA9IHRoaXMuJHJvdXRlLnBhcmFtcy5ydGE7CiAgICAgICAgLy90aGlzLnJ0YXMgPSB0aGlzLiRyb3V0ZS5wYXJhbXMucnRhOwogICAgfSovCgoKICAgIGlmIChsb2NhbFN0b3JhZ2UuaWRDKSB7CiAgICAgIHRoaXMucmVzcHVlc3RhLmlkQyA9IGxvY2FsU3RvcmFnZS5pZEM7CiAgICB9IGVsc2UgewogICAgICBsb2NhbFN0b3JhZ2UucHJlZ3VudGEgPSB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQ7IC8vdGhpcy5wcmVndW50YSA9IHRoaXMuJHJvdXRlLnBhcmFtcy5xdG47CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXRDYXNlOiBmdW5jdGlvbiBnZXRDYXNlKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdHJ5IHsKICAgICAgICB0aGlzLmZvcm9Db250cm9sbGVyLmdldFF1ZXN0aW9uKGxvY2FsU3RvcmFnZS5pZEMpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAgIGlmIChkYXRhLmRhdGEuYW5zd2Vyc1swXSAhPSBudWxsKSB7CiAgICAgICAgICAgIF90aGlzLnJ0YXMgPSBkYXRhLmRhdGEuYW5zd2VyczsKICAgICAgICAgICAgY29uc29sZS5sb2coX3RoaXMucnRhcyk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0gY2F0Y2ggKF91bnVzZWQpIHsKICAgICAgICBjb25zb2xlLmxvZygiRXJyb3IgQ29ubmVjdGlvbiIpOwogICAgICB9CiAgICB9LAogICAgZ3VhcmRhcjogZnVuY3Rpb24gZ3VhcmRhcigpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICBpZiAodGhpcy4kcm9vdC5yb2wgPT0gIkwiKSB7CiAgICAgICAgdGhpcy5mb3JvQ29udHJvbGxlci5zYXZlQW5zd2VyKHRoaXMucmVzcHVlc3RhKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgICBfdGhpczIuZ2V0Q2FzZSgpOwoKICAgICAgICAgIF90aGlzMi5zZW5kRW1haWwoKTsKCiAgICAgICAgICBfdGhpczIucmVzcHVlc3RhLmRlc2NyaXBBbnMgPSAnJzsKICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZGlzcGxheSA9IHRydWU7CiAgICAgIH0KICAgIH0sCiAgICBhY2VwdDogZnVuY3Rpb24gYWNlcHQoKSB7CiAgICAgIHRoaXMuZGlzcGxheSA9IGZhbHNlOwogICAgfSwKICAgIHNlbmRFbWFpbDogZnVuY3Rpb24gc2VuZEVtYWlsKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIGVtYWlsanMuaW5pdCgndXNlcl9QdWxkQnRESHpJRVJEYktQMjdleVQnKTsKICAgICAgdGhpcy51c2VyQ29udHJvbGxlciA9IG5ldyBVc2VyQ29udHJvbGxlcigpOwoKICAgICAgdHJ5IHsKICAgICAgICB0aGlzLnVzZXJDb250cm9sbGVyLmdldEZpcnN0KHRoaXMuJHJvb3QuaWQpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAgIF90aGlzMy5jb3JyZW8gPSBkYXRhLmRhdGEudXNlci5lbWFpbDsKICAgICAgICAgIF90aGlzMy5sYXcgPSBkYXRhLmRhdGEubGF3OwogICAgICAgIH0pOwogICAgICB9IGNhdGNoIChfdW51c2VkMikgewogICAgICAgIGNvbnNvbGUubG9nKCJFcnJvciBDb25uZWN0aW9uIik7CiAgICAgIH0KCiAgICAgIHRyeSB7CiAgICAgICAgZW1haWxqcy5zZW5kKCJzZXJ2aWNlXzBlNjJhNWIiLCAidGVtcGxhdGVfbm4xdjN4YyIsIHsKICAgICAgICAgIGZyb206IHRoaXMuJHJvb3QudXNlciwKICAgICAgICAgIHRvX25hbWU6IGxvY2FsU3RvcmFnZS5pZFVzZXJDLAogICAgICAgICAgcmVwbHlfdG86IHRoaXMuY29ycmVvLAogICAgICAgICAgbWVzc2FnZTogJyInICsgdGhpcy5wcmVndW50YSArICciJwogICAgICAgIH0pOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKHsKICAgICAgICAgIGVycm9yOiBlcnJvcgogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["C:\\Users\\fmoji\\Documents\\Prolaw\\PROLaw\\client\\src\\views\\Forum.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div>\n        <Dialog header=\"\" :visible=\"display\" >\n            Usted no posee los permisos para responder a esta pregunta\n            <Button label=\"Ok\" icon=\"pi pi-check\" @click=\"acept\" autofocus />\n        </Dialog>\n        <div class=\"forum-container\">\n            <h3>{{pregunta}}</h3>\n            <br>\n            <div>\n                <Textarea v-model=\"respuesta.descripAns\" rows=\"5\" cols=\"107\" placeholder=\"Escriba aqui su respuesta...\" />\n                <Button label=\"Responder\" class=\"p-button-sm\" @click=\"guardar\" style=\"font-weight: bold\"/> \n            </div>\n            <br>\n            <Panel v-if=\"rtas.length > 0 && rtas[0].nameUser != ''\" header=\"Respuestas\">\n                <div v-for=\"i in rtas\" :key=\"i\">\n                    <div style=\"display:flex; justify-content: space-between;\">\n                        <div style=\"margin: 10px\" align=\"left\">\n                            <b>{{i.nameUser}}</b>\n                        </div>\n                        <div align=\"right\" style=\"color: gray; margin: 10px\">\n                            {{i.dateAns}}\n                        </div>\n                    </div>\n                    <div>\n                        {{i.descripAns}}\n                    </div>\n                    <Divider align=\"right\">\n                        <Button label=\"Contactar a este abogado\" @click=\"$router.push({name: 'perfil' , params: {id : i.idUserA}})\" align=\"right\" style=\"font-weight: bold\"/>\n                    </Divider>\n                </div>\n            </Panel>\n            \n        </div>\n    </div>\n</template>\n\n<script>\nimport ForumController from '../controller/ForumController.js'\nimport UserController from \"../controller/UserController.js\";\nimport emailjs from 'emailjs-com';\nexport default {\n    foroController: null,\n    created() {\n        this.foroController = new ForumController();\n        this.getCase();\n        console.log(this.$root.id);\n    },\n    data(){\n        return{\n            pregunta: '',\n            rtas: [\n                {\n                    nameUser: '',\n                    dateAns: '',\n                    descripAns: ''\n                }\n            ],\n            respuesta: {\n                id: '',\n                idC: '',\n                idUserA: this.$root.id,\n                descripAns: '',\n                nameUser: this.$root.user\n            },\n            display: null,\n            correo: ''\n        }\n    }, \n    mounted() {\n        if (localStorage.pregunta) {\n            this.pregunta = localStorage.pregunta;\n        } else {\n            localStorage.pregunta = this.$route.params.qtn;\n            //this.pregunta = this.$route.params.qtn;\n        }\n        /*if (localStorage.rtas) {\n            this.rtas = JSON.parse(localStorage.getItem(\"rtas\"));\n            //console.log(this.rtas);\n        } else {\n            localStorage.rtas = this.$route.params.rta;\n            //this.rtas = this.$route.params.rta;\n        }*/\n        if (localStorage.idC) {\n            this.respuesta.idC = localStorage.idC;\n        } else {\n            localStorage.pregunta = this.$route.params.id;\n            //this.pregunta = this.$route.params.qtn;\n        }\n    },\n    methods: {\n        getCase: function(){\n            try{this.foroController.getQuestion(localStorage.idC).then(data => {\n              if(data.data.answers[0] != null){\n                this.rtas = data.data.answers;\n                console.log(this.rtas);\n              }\n        })}catch{console.log(\"Error Connection\");}\n        },\n        guardar: function(){\n            if (this.$root.rol == \"L\"){\n                this.foroController.saveAnswer(this.respuesta).then( data => {\n                    this.getCase();\n                    this.sendEmail();\n                    this.respuesta.descripAns = '';\n                    console.log(data);\n                })\n            }else{\n                this.display = true;\n            }\n        },\n        acept: function(){\n            this.display = false;\n        },\n        sendEmail() {\n            emailjs.init('user_PuldBtDHzIERDbKP27eyT');\n            this.userController = new UserController();\n            try{this.userController.getFirst(this.$root.id).then(data => {\n                this.correo = data.data.user.email;\n                this.law = data.data.law;\n            })}catch{console.log(\"Error Connection\");}\n            try {\n                emailjs.send(\"service_0e62a5b\",\"template_nn1v3xc\",{\n                from: this.$root.user,\n                to_name: localStorage.idUserC,\n                reply_to: this.correo,\n                message: '\"' + this.pregunta + '\"'\n        })\n        } catch(error) {\n            console.log({error})\n        }}\n    },\n}\n</script>"],"sourceRoot":""}]}